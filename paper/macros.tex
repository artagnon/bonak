%%%%%%%%%%%%%% Environnement global %%%%%%%%%

\def\proofskip{\vskip 5pt}
\def\proofbox{\hfill\rule{6pt}{6pt}}
\newcommand{\TODO}[1]{}
\newcommand{\omitnow}[1]{}
\newcommand{\omitted}[1]{}
\newcommand{\replaced}[2]{#1}
\newcommand\postsoumission[1]{} %{#1}

\newenvironment{preuve}{{\noindent \sc Preuve:\/}~}{\proofbox\proofskip}
\newenvironment{defi}{\medskip}{\proofskip}

\newenvironment{petit}{\begin{footnotesize}}{\end{footnotesize}}

\def\remarque{\noindent{\bf Remarque}}
\def\remarques{\noindent{\bf Remarques}}
\def\remark{\noindent{\bf Remark}}
\def\remarks{\noindent{\bf Remarks}}
\def\fdefinition{{\bf D\'efinition}}
\def\fdefinitions{{\bf D\'efinitions}}

% Bilingue
\newtheorem{prop}{Proposition}
\newtheorem{conj}{Conjecture}

% Francais
\newtheorem{ppte}{Propri\'et\'e}
\newtheorem{theoreme}{Th\'eor\`eme}
\newtheorem{lemme}{Lemme}
\newtheorem{corollaire}{Corollaire}
\newtheorem{axiome}{Axiome}

% English
\newtheorem{ppty}{Property}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{corollary}{Corollary}
\newtheorem{axiom}{Axiom}

%%%%%%%%%%%%%% Les alias %%%%%%%%%%%%%%%

%%%% Connecteurs

\def\IMP{\rightarrow}
\def\arrow{\IMP}
\def\AND{\land}
\def\OR{\lor}
\def\BOT{\bot}
\def\DUAL{\bot}
\def\NOT{\neg}

%%%% Les reductions courantes

\newcommand{\red}{\rightarrow}
\newcommand{\invred}{\leftarrow}
\newcommand{\redh}{\stackrel{h}{\rightarrow}}
\newcommand{\redex}{\stackrel{r}{\rightarrow}}
\newcommand{\redun}{\stackrel{1}{\rightarrow}}
\newcommand{\redstar}{\stackrel{*}{\rightarrow}}
\newcommand{\invredstar}{\stackrel{*}{\leftarrow}}

%%%% Les traductions

\newcommand{\sem}[1]{[\![#1]\!]}
\newcommand{\trad}[1]{[\![#1]\!]}
\newcommand{\embedlr}[1]{#1^{\mbox{\tiny $>$}}}
\newcommand{\embedparlr}[1]{(#1)^{\mbox{\tiny $>$}}}
\newcommand{\embedrl}[1]{#1^{\mbox{\tiny $<$}}}
\newcommand{\embedparrl}[1]{(#1)^{\mbox{\tiny $<$}}}
\newcommand{\isocbn}[1]{#1^{\sf N}}   %{\cal N}
\newcommand{\isocbnpar}[1]{(#1)^{\sf N}}
\newcommand{\isocbncom}[2]{#2_{#1}^{\sf N}}
\newcommand{\isocbncompar}[2]{(#2)_{#1}^{\sf N}}
\newcommand{\isocbnrev}[1]{#1^{{\sf N}^{-1}}}
\newcommand{\isocbnrevpar}[1]{(#1)^{{\sf N}^{-1}}}
\newcommand{\isocbnrevcom}[2]{#1_{#2}^{{\sf N}^{-1}}}
\newcommand{\isocbnrevcompar}[2]{(#1)_{#2}^{{\sf N}^{-1}}}

\newcommand{\isocbv}[1]{#1^{\sf V}}   %{\cal V}
\newcommand{\isocbvpar}[1]{(#1)^{\sf V}}
\newcommand{\isocbvcom}[2]{{#2}_{#1}^{\sf V}}
\newcommand{\isocbvcompar}[2]{(#2)_{#1}^{\sf V}}
\newcommand{\isocbvrev}[1]{#1^{{\sf V}^{-1}}}
\newcommand{\isocbvrevpar}[1]{(#1)^{{\sf V}^{-1}}}
\newcommand{\isocbvrevcom}[2]{{#1}_{#2}^{{\sf V}^{-1}}}
\newcommand{\isocbvrevcompar}[2]{(#1)_{#2}^{{\sf V}^{-1}}}

\newcommand{\ccl}[1]{{\mathsf{ccl}}(#1)}

%%%%%%%% lambda-bar calcul %%%%%%

\def\LSP{\overline{\lambda}}
\def\LSPMU{\overline{\lambda}\mu}
\def\LSPC{\overline{\lambda}_C}
\def\LMT{\mbox{LMT}}
\def\LJT{\mbox{LJT}}
\def\LKT{\mbox{LKT}}
\def\LM{\mbox{LM}}
\def\LK{\mbox{LK}}
\def\LJ{\mbox{LJ}}

\def\FORALL{\forall}
\def\EXISTS{\exists}
\def\FORALLL{\FORALL_g}
\def\EXISTSL{\EXISTS_g}
\def\FORALLR{\FORALL_d}
\def\EXISTSR{\EXISTS_d}

\def\redh{\stackrel{h}{\rightarrow}}
\def\redplus{\stackrel{E}{\rightarrow}}
\def\ANYRED{\stackrel{R}{\rightarrow}}

\def\EQUIV{\!::=}
\def\DP{\!:\!}
\def\VEC{\overrightarrow}

\def\CONS{::}
\def\ARO{\;@\;}
\def\BEC{:=}
\def\LIFT{\!\uparrow}

\def\CASE{\mbox{\it case}}
\def\OF{\mbox{\it of}}
\def\FLECHE{\;-\!\!\!>}

\def\POINT{.\;}
\def\REDLJT{\stackrel{\LJT}{\longrightarrow}}
\def\REDLKT{\stackrel{\LKT}{\longrightarrow}}
\def\DERIVELJT#1#2{\DERI{\REDLJT}{#1}{#2}}
\def\DERIVELKT#1#2{\DERI{\REDLKT}{#1}{#2}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\Alt}{ \mid\!\!\mid  } % Alternative (lower and symmetric)
\newcommand \seql[3]
{\raisebox{3ex}{$\mbox{$#1$}\;\;$} \; \shortstack{$#2$ \\ \mbox{}\\
    \mbox{}\hrulefill\mbox{}\\ \mbox{}\\ $#3$}}
\newcommand \seqr[3]
{\shortstack{$#2$ \\ \mbox{}\\
    \mbox{}\hrulefill\mbox{}\\ \mbox{}\\ $#3$} \; \raisebox{3ex}{$\;\;\mbox{$#1$}$}}
\newcommand \seqadmissibler[3]
{\shortstack{$#2$ \\ \mbox{}\\
    \mbox{}\hrulefill\mbox{}\\\hrulefill\mbox{}\\ \mbox{}\\ $#3$} \; \raisebox{3ex}{$\;\;\mbox{$#1$}$}}
\newcommand \seq[2]{\shortstack{$#1$ \\ \mbox{}\\
    \mbox{}\hrulefill\mbox{}\\ \mbox{}\\ $#2$}}
\newcommand{\empht}[1]{{#1}}
\newcommand \seqdots[2]{\shortstack{$#1$ \\ \mbox{}\\
    \mbox{}\vdots\mbox{}\\ \mbox{}\\ $#2$}}
\newcommand \seqdotsl[3]{\shortstack{$#2$ \\ \mbox{}\\
    \mbox{}\vdots\mbox{$#1$}\\ \mbox{}\\ $#3$}}
\newcommand\definis[1]{\textbf{#1}}

\newcommand{\cad}{{c'est-à-dire}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Noms de calcul

\newcommand{\lkg}[3]{#1 \,|\, #2\vdash  #3}
\newcommand{\lkd}[3]{#1 \vdash #2 \,|\, #3}
\newcommand{\lk}[2]{#1 \vdash  #2}
\newcommand{\lkgl}[3]{#1 \,;\, #2\vdash  #3}
\newcommand{\lkdl}[3]{#1 \vdash #2 \,;\, #3}
\newcommand{\lksubst}[4]{(#1 \vdash  #2) \implies (#3 \vdash #4)}

\newcommand{\lktqg}[4]{#1 \,|\, #2\vdash  #4}
\newcommand{\lktqd}[4]{#1 \vdash #3 \,|\, #4}
\newcommand{\lktq}[4]{#1 \vdash  #4}
\newcommand{\lktqgi}[5]{#2 \,|\, #3\stackrel{#1}{\vdash} #5}
\newcommand{\lktqgli}[5]{#2 \,;\, #3\stackrel{#1}{\vdash} #5}
\newcommand{\lktqdi}[5]{#2 \stackrel{#1}{\vdash} #4 \,|\, #5}
\newcommand{\lktqdli}[5]{#2 \stackrel{#1}{\vdash} #4 \,;\, #5}
\newcommand{\lktqi}[5]{#2 \stackrel{#1}{\vdash} #5}
\newcommand{\lktqgl}[4]{#1 \,;\, #2\vdash  #4}
\newcommand{\lktqdl}[4]{#1 \vdash #3 \,;\, #4}
\newcommand{\lktqgll}[4]{#1 || #2\vdash  #4}
\newcommand{\lktqdll}[4]{#1 \vdash #3 || #4}

\newcommand{\lkch}{LK_{\mu\tilde\mu}}
\newcommand{\lkth}{LKT_{\mu}}
\newcommand{\lktch}{LKT_{\mu\tilde\mu}}
\newcommand{\lkqh}{LKQ_{\tilde\mu}}
\newcommand{\lkqch}{LKQ_{\mu\tilde\mu}}
\newcommand{\lkchset}{LK_{\mu\tilde\mu/}}

\newcommand{\lkcht}{LK_{\mu_n\tilde\mu}}
\newcommand{\lkchq}{LK_{\mu\tilde\mu_v}}

\newcommand{\lbdch}{\overline\lambda\mu\tilde\mu}
\newcommand{\lbdchmucbn}{\overline\lambda\mu_n}
\newcommand{\lbdchcbv}{\overline\lambda\mu\tmu_v}
\newcommand{\lbdchtmucbv}{\overline\lambda\tmu_v}
\newcommand{\lbdtch}{\lbdch_T}
\newcommand{\lbdqch}{\lbdch_Q}

\newcommand{\lbdsym}{\lbd^{Sym}}

%% Regles de reduction

\newcommand{\letlift}{\mathit{let_{\mathit lift}}}
\newcommand{\etalet}{\eta_{\mathit let}}
\newcommand{\muapp}{\mu_{\mathit{app}}}
\newcommand{\omuapp}{\omu_{\mathit{app}}}
\newcommand{\muvar}{\mu_{\mathit{var}}}
\newcommand{\mulet}{\mu_{\mathit{let}}}
\newcommand{\betav}{\beta_v}

\newcommand{\FV}{FV}

%%%%%%%%%%%%%%%%
%% Constructeurs

\definecolor{gray}{rgb}{0.18,0.18,0.18}

\newcommand{\black}[1]{\textcolor{black}{#1}}
\newcommand{\blue}[1]{\textcolor{black}{#1}}
\newcommand{\redcolor}[1]{\textcolor{black}{#1}}
\newcommand{\gray}[1]{\textcolor{gray}{#1}}

%\newcommand{\coupesep}{\Join}
\newcommand{\coupesep}{|\!|}
\newcount\coupelevel
\newcount\coupecolor
\coupelevel=0
\newcommand{\coupe}[2]{\black{
    \ifnum \coupelevel>0
      %    \overline{\langle \redcolor{#1} |\!| \blue{#2} \rangle}
      \coupecolor=\coupelevel
      \divide\coupecolor by 3\relax
      \output{\coupecolor}
      {\mbox{\textlangle}} \overline{\gray{#1} \gray{\coupesep} \gray{#2}} \mbox{\textrangle}
    \else
      \advance\coupelevel by 1\relax\langle \redcolor{#1} \coupesep \blue{#2} \rangle
      \output{\coupelevel}
    \fi}}
\newcommand{\cut}[2]{\coupe{#1}{#2}}
\newcommand{\cons}[2]{{#1}\cdot{#2}}
\newcommand{\consproj}[2]{{#1}[{#2}]}

\newcommand{\tmu}{{\tilde\mu}}
\newcommand{\muof}[2]{{\mu #1.#2}}
\newcommand{\lbar}{{\overline{\lambda}}}
\newcommand{\Sub}[3]{#1[{#3}/{#2}]}
\newcommand{\DSub}[3]{#1[#2\hookleftarrow #3]}
\newcommand{\CSub}[3]{#1[#2\leadsto #3]}
\newcommand{\omu}{\bar{\mu}}
\newcommand{\oalpha}{\star}
\newcommand{\omualpha}{\omu\!\star} % macro spéciale qui supprime un espace

\renewcommand{\l}{\lambda}
\newcommand{\lbd}{\lambda}
\newcommand{\letin}[3]{\mathbf{let}~{#1}=#2\;\mathbf{in}~#3}
\newcommand{\rawletin}{\mbox{\tt let-in}}

% Calculs avec liaison dynamique
\newcommand{\alphabf}{\hat{\alpha}}
\newcommand{\betabf}{\hat{\beta}}
\newcommand{\wmu}{\widehat\mu}
\newcommand{\lbdchdyn}{\overline\lambda\mu\tilde\mu\wmu}
\newcommand{\lbdchtpv}{\overline\lambda\mu\tilde\mu_v\#}
\newcommand{\lbdchtp}{\overline\lambda\mu\tilde\mu\#}

\newcommand{\darr}[2]{\;_{#1}\!\!\imp_{#2}}
\newcommand{\annot}[2]{{#1}_{#2}}

% Constructeur de la soustraction
\newcommand{\lbdminus}[2]{\tilde\lambda #1.#2}
\newcommand{\lbdminusl}[2]{\l_1 #1.#2}
\newcommand{\lbdminusr}[2]{\l_2 #1.#2}
\newcommand{\consminus}[2]{#2 - #1}

\newcommand{\tnu}{{\tilde\nu}}

\newcommand{\pair}[2]{({#1},{#2})}
\newcommand{\case}[2]{[{#1},{#2}]}
\newcommand{\unit}{\ltimes}
\newcommand{\tp}{\rtimes}
\newcommand{\notv}[1]{\neg(#1)}
\newcommand{\note}[1]{\neg[#1]}

\newcommand{\conthole}{\mbox{\tiny $\blacksquare$}}
\newcommand{\termhole}{\bullet}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Control operators
\newcommand{\A}{\mathcal{A}}
\newcommand{\Shift}{\mathcal{S}}
\renewcommand{\P}{\#}
\newcommand{\F}{\mathcal{F}}
\newcommand{\K}{\mathcal{K}}
\newcommand{\abort}{\textit{abort}}
\newcommand{\callcc}{\textit{callcc}}
\newcommand{\shift}{\textit{shift}}
\newcommand{\reset}{\textit{reset}}
\newcommand{\prompt}{\textit{prompt}}

\newcommand{\Cm}{\mathcal{C^-}}
\newcommand{\tpcst}{\textsf{tp}}
\newcommand{\lCtop}{\lambda_{{\Cm\tpcst}}}
\newcommand{\botj}{\perp\!\!\!\!\perp}
