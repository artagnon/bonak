\documentclass{lipics-v2021}

\usepackage{amsmath, amssymb, mathrsfs, tikz, tikz-cd, mathpazo, anyfontsize, xargs, environ, tabularx, booktabs, makecell, colortbl, float, art.cls/colorpal, art.cls/ct, art.cls/sset, art.cls/lim, art.cls/joinargs}
\usepackage[utf8]{inputenc}
\usepackage[OT1]{fontenc}
\usepackage[prefix=bonak]{art.cls/xkeymask}

% Use the patterns library to draw the cubes figure
\usetikzlibrary{patterns}

% Magic with xkeyval to go over the 9-argument limit of LaTeX
\makeatletter
\define@cmdkey[bonak]{X}{D}{(#1)}
\define@cmdkey[bonak]{Xrefl}{D}{(#1)}
\define@cmdkey[bonak]{Xrefl}{L}{(#1)}

\define@cmdkey[bonak]{frame}{D}{(#1)}
\define@cmdkey[bonak]{layer}{D}{(#1)}
\define@cmdkey[bonak]{layer}{d}{(#1)}
\define@cmdkey[bonak]{painting}{D}{(#1)}
\define@cmdkey[bonak]{painting}{E}{(#1)}
\define@cmdkey[bonak]{painting}{d}{(#1)}
\define@cmdkey[bonak]{fullframe}{D}{(#1)}

\define@cmdkey[bonak]{restrframe}{D}{(#1)}
\define@cmdkey[bonak]{restrframe}{d}{(#1)}
\define@cmdkey[bonak]{restrlayer}{D}{(#1)}
\define@cmdkey[bonak]{restrlayer}{d}{(#1)}
\define@cmdkey[bonak]{restrlayer}{l}{(#1)}
\define@cmdkey[bonak]{restrpainting}{D}{(#1)}
\define@cmdkey[bonak]{restrpainting}{E}{(#1)}
\define@cmdkey[bonak]{restrpainting}{d}{(#1)}
\define@cmdkey[bonak]{restrpainting}{c}{(#1)}

\define@cmdkey[bonak]{reflframe}{D}{(#1)}
\define@cmdkey[bonak]{reflframe}{L}{(#1)}
\define@cmdkey[bonak]{reflframe}{d}{(#1)}
\define@cmdkey[bonak]{reflframeExt}{D}{(#1)}
\define@cmdkey[bonak]{reflframeExt}{L}{(#1)}
\define@cmdkey[bonak]{reflframeExt}{d}{(#1)}
\define@cmdkey[bonak]{refllayer}{D}{(#1)}
\define@cmdkey[bonak]{refllayer}{L}{(#1)}
\define@cmdkey[bonak]{refllayer}{d}{(#1)}
\define@cmdkey[bonak]{refllayer}{l}{(#1)}
\define@cmdkey[bonak]{refllayerExt}{D}{(#1)}
\define@cmdkey[bonak]{refllayerExt}{L}{(#1)}
\define@cmdkey[bonak]{refllayerExt}{d}{(#1)}
\define@cmdkey[bonak]{refllayerExt}{l}{(#1)}
\define@cmdkey[bonak]{reflpainting}{D}{(#1)}
\define@cmdkey[bonak]{reflpainting}{L}{(#1)}
\define@cmdkey[bonak]{reflpainting}{E}{(#1)}
\define@cmdkey[bonak]{reflpainting}{d}{(#1)}
\define@cmdkey[bonak]{reflpainting}{c}{(#1)}
\define@cmdkey[bonak]{reflpaintingExt}{D}{(#1)}
\define@cmdkey[bonak]{reflpaintingExt}{L}{(#1)}
\define@cmdkey[bonak]{reflpaintingExt}{E}{(#1)}
\define@cmdkey[bonak]{reflpaintingExt}{d}{(#1)}
\define@cmdkey[bonak]{reflpaintingExt}{c}{(#1)}

\define@cmdkey[bonak]{cohframe}{D}{(#1)}
\define@cmdkey[bonak]{cohframe}{d}{(#1)}
\define@cmdkey[bonak]{cohlayer}{D}{(#1)}
\define@cmdkey[bonak]{cohlayer}{d}{(#1)}
\define@cmdkey[bonak]{cohlayer}{l}{(#1)}
\define@cmdkey[bonak]{cohpainting}{D}{(#1)}
\define@cmdkey[bonak]{cohpainting}{E}{(#1)}
\define@cmdkey[bonak]{cohpainting}{d}{(#1)}
\define@cmdkey[bonak]{cohpainting}{c}{(#1)}
\makeatother

% Truncated sets, otherwise referred to as X: the general macro
\newcommandx{\X}[2][1,2]{
  \ensuremath{{\color{carolina}{\nu\textsf{Set}}}^{#1}}
  \setkeys*[bonak]{X}{#2}
}

\newcommandx{\Xrefl}[2][1,2]{
  \ensuremath{{\color{carolina}{\nu\textsf{reflSet}}}^{#1}}
  \setkeys*[bonak]{Xrefl}{#2}
}

% Frame, layer, and painting: the general macro
\newcommandx{\prim}[5][2,3,4,5]{
  \ensuremath{\mathsf{\color{indian-yellow}{#1}}^{
    \joinargs[#2][#3][#4]}}
  \setkeys*[bonak]{#1}{#5}
}

% Restriction for frame, layer, and painting: the general macro
\newcommandx{\restr}[7][2,3,4,5,6,7]{
  \ensuremath{\mathsf{\color{russian-green}{restr}}^{
    \joinargs[#2][#3][#4]}_{\joinargs[\mathsf{\color{indian-yellow}{#1}}][#5][#6]}}
  \setkeys*[bonak]{restr#1}{#7}
}

\newcommandx{\refl}[6][1,2,3,4,5,6]{
  \ensuremath{\mathsf{\color{russian-green}{refl}}^{
    \joinargs[#2][#3][#4]}_{\joinargs[\mathsf{\color{indian-yellow}{#1}}][#5]}}
  \setkeys*[bonak]{refl#1}{#6}
}

\newcommandx{\depsmacro}[5][4,5]{
  \ensuremath{\mathsf{\color{strawberry}{#1}}^{
    \joinargs[\mathsf{\color{#3}{#2}}]}^{\joinargs[#4][#5]}}
}

% Coherence conditions for frame, layer, and painting: the general macro

\newcommandx{\coh}[9][2,3,4,5,6,7,8,9]{
  \ensuremath{\mathsf{\color{chestnut}{coh}}^{
    \joinargs[#2][#3][#4]}_{\joinargs[\mathsf{\color{indian-yellow}{#1}}][#5][#6][#7][#8]}}
  \setkeys*[bonak]{coh#1}{#9}
}

\newcommandx{\cohid}[9][2,3,4,5,6,7,8,9]{
  \ensuremath{\mathsf{\color{chestnut}{cohid}}^{
    \joinargs[#2][#3][#4]}_{\joinargs[\mathsf{\color{indian-yellow}{#1}}][#5][#6][#7][#8]}}
  \setkeys*[bonak]{cohid#1}{#9}
}

% Simplicial and Cubical sets
\newcommand{\DeltaHat}{\ensuremath{\hat{\boldsymbol{\Delta}}}}
\newcommand{\DeltaPlus}{\ensuremath{\boldsymbol{\Delta}_+}}
\newcommand{\Cube}{\ensuremath{\boldsymbol{{\square}}}}
\newcommand{\CSet}{\ensuremath{\mathsf{Set}_{\boldsymbol{\square}}}}

% Universe, referred to as U
\newcommandx{\HSet}[1][1=]{\ensuremath{\mathsf{\color{spanish-blue}{HSet}}_{#1}}}
\newcommand{\HProp}{\ensuremath{\mathsf{\color{spanish-blue}{HProp}}}}
\newcommandx{\HGpd}[1][1=]{\ensuremath{\mathsf{\color{spanish-blue}{HGpd}}_{#1}}}
\newcommand{\Type}{\ensuremath{\mathsf{\color{spanish-blue}{Type}}}}
\newcommand{\SProp}{\ensuremath{\mathsf{\color{spanish-blue}{SProp}}}}

% The unit and bool types
\newcommand{\unittype}{\ensuremath{\mathsf{unit}}}
\newcommand{\booltype}{\ensuremath{\mathsf{bool}}}
\newcommand{\unitpoint}{\ensuremath{\ast}}

% Definitional and extensional equality
\newcommand{\defeq}{\ensuremath{\triangleq}}

% Some abbreviations
\newcommand{\tl}{\ensuremath{\mathsf{tl}}}
\newcommand{\hd}{\ensuremath{\mathsf{hd}}}
\newcommand{\imp}{\rightarrow}
\newcommand{\overright}[1]{\overrightarrow{#1}}
\newcommand{\ap}{\mathsf{ap}\;}
\renewcommand{\D}{D}
\newcommand{\hdD}{D.1}
\newcommand{\tlD}{D.2}
\renewcommand{\L}{L}
\newcommand{\R}{R}
\renewcommand{\d}{d}
\renewcommand{\E}{E}
\renewcommand{\l}{l}
\renewcommand{\c}{c}
\newcommand{\pair}[2]{(#1, #2)}
\newcommand{\Dom}{\textsf{Dom}}
\newcommand{\UIP}{\textsf{UIP}}

\newcommand{\udensdash}[1]{%
    \tikz[baseline=(todotted.base)]{
        \node[inner sep=1pt,outer sep=0pt] (todotted) {$#1$};
        \draw[densely dashed] (todotted.south west) -- (todotted.south east);
    }%
}%

% Adjust font size
\newcommand{\smfontsize}{\fontsize{8}{11}\selectfont}

% These are renewed in tables, but let's define them now for in-document
% typesetting
\newcommandx{\framep}[4][1,2,3,4]{\prim{frame}[#1][#2][#3][#4]}
\newcommandx{\layer}[4][1,2,3,4]{\prim{layer}[#1][#2][#3][#4]}
\newcommandx{\painting}[4][1,2,3,4]{\prim{painting}[#1][#2][#3][#4]}
\newcommandx{\restrf}[6][1,2,3,4,5,6]{\restr{frame}[#1][#2][#3][#4][#5][#6]}
\newcommandx{\restrl}[6][1,2,3,4,5,6]{\restr{layer}[#1][#2][#3][#4][#5][#6]}
\newcommandx{\restrp}[6][1,2,3,4,5,6]{\restr{painting}[#1][#2][#3][#4][#5][#6]}
\newcommandx{\reflf}[5][1,2,3,4,5]{\refl[frame][#1][#2][#3][#4][#5]}
\newcommandx{\reflfext}[5][1,2,3,4,5]{\refl[frameExt][#1][#2][#3][#4][#5]}
\newcommandx{\refll}[5][1,2,3,4,5]{\refl[layer][#1][#2][#3][#4][#5]}
\newcommandx{\refllext}[5][1,2,3,4,5]{\refl[layerExt][#1][#2][#3][#4][#5]}
\newcommandx{\reflp}[5][1,2,3,4,5]{\refl[painting][#1][#2][#3][#4][#5]}
\newcommandx{\reflpext}[5][1,2,3,4,5]{\refl[paintingExt][#1][#2][#3][#4][#5]}
\newcommandx{\cohf}[8][1,2,3,4,5,6,7,8]{\coh{frame}[#1][#2][#3][#4][#5][#6][#7][#8]}
\newcommandx{\cohfext}[8][1,2,3,4,5,6,7,8]{\coh{frameExt}[#1][#2][#3][#4][#5][#6][#7][#8]}
\newcommandx{\cohl}[8][1,2,3,4,5,6,7,8]{\coh{layer}[#1][#2][#3][#4][#5][#6][#7][#8]}
\newcommandx{\cohlext}[8][1,2,3,4,5,6,7,8]{\coh{layerExt}[#1][#2][#3][#4][#5][#6][#7][#8]}
\newcommandx{\cohp}[8][1,2,3,4,5,6,7,8]{\coh{painting}[#1][#2][#3][#4][#5][#6][#7][#8]}
\newcommandx{\cohpext}[8][1,2,3,4,5,6,7,8]{\coh{paintingExt}[#1][#2][#3][#4][#5][#6][#7][#8]}
\newcommandx{\cohidf}[8][1,2,3,4,5,6,7,8]{\cohid{frame}[#1][#2][#3][#4][#5][#6][#7][#8]}
\newcommandx{\cohidl}[8][1,2,3,4,5,6,7,8]{\cohid{layer}[#1][#2][#3][#4][#5][#6][#7][#8]}
\newcommandx{\cohidp}[8][1,2,3,4,5,6,7,8]{\cohid{painting}[#1][#2][#3][#4][#5][#6][#7][#8]}
\newcommandx{\fullframe}[2][1,2]{\prim{fullframe}[#1][][][#2]}

\newcommandx{\frametype}[2][1,2]{\prim{FRAME}[#1][#2]}
\newcommandx{\layertype}[2][1,2]{\prim{LAYER}[#1][#2]}
\newcommandx{\paintingtype}[2][1,2]{\prim{PAINTING}[#1][#2]}
\newcommandx{\restrftype}[2][1,2]{\restr{FRAME}[#1][#2]}
\newcommandx{\restrltype}[2][1,2]{\restr{LAYER}[#1][#2]}
\newcommandx{\restrptype}[2][1,2]{\restr{PAINTING}[#1][#2]}
\newcommandx{\cohftype}[2][1,2]{\coh{FRAME}[#1][#2]}
\newcommandx{\cohltype}[2][1,2]{\coh{LAYER}[#1][#2]}
\newcommandx{\cohptype}[2][1,2]{\coh{PAINTING}[#1][#2]}

\newcommandx{\deps}[2][1,2]{\depsmacro{deps}{restr}{russian-green}[#1][#2]}
\newcommandx{\fulldeps}[1][1]{\depsmacro{deps}{fullrestr}{russian-green}[#1]}
\newcommandx{\depscohs}[2][1,2]{\depsmacro{deps}{coh}{chestnut}[#1][#2]}
\newcommandx{\fulldepscohs}[1][1]{\depsmacro{deps}{fullcoh}{chestnut}[#1]}
\newcommandx{\depscoht}[2][1,2]{\depsmacro{deps}{coh2}{chestnut}[#1][#2]}
\newcommandx{\fulldepscoht}[1][1]{\depsmacro{deps}{fullcoh2}{chestnut}[#1]}
\newcommandx{\depstype}[2][1,2]{\depsmacro{DEPS}{restr}{russian-green}[#1][#2]}
\newcommandx{\fulldepstype}[1][1]{\depsmacro{DEPS}{fullrestr}{russian-green}[#1]}
\newcommandx{\depscohstype}[2][1,2]{\depsmacro{DEPS}{coh}{chestnut}[#1][#2]}
\newcommandx{\fulldepscohstype}[1][1]{\depsmacro{DEPS}{fullcoh}{chestnut}[#1]}
\newcommandx{\depscohttype}[2][1,2]{\depsmacro{DEPS}{coh2}{chestnut}[#1][#2]}
\newcommandx{\fulldepscohttype}[1][1]{\depsmacro{DEPS}{fullcoh2}{chestnut}[#1]}


% Kerning for star
\newcommand{\kstar}{{\star}}

% Squelch warnings when using faLink
\newcommand{\linkicon}{\texorpdfstring{\faLink}{ðŸ”—}}

% The eqntable environment
\newcolumntype{Y}{>{\centering\arraybackslash}X}
\NewEnviron{eqntable}[1]{
  \begin{table}[H]
  \smfontsize
  \begin{tabularx}{\linewidth}{
    @{}
    >{$}l<{$}
    >{$}c<{$}
    >{$}c<{$}
    >{$}Y<{$}
    @{}}
    \toprule
    \BODY
    \bottomrule
  \end{tabularx}
  \caption{#1}
  \end{table}
}

% A block in the eqntable environment
\NewDocumentCommand{\eqnline}{m m m m}{#1 & #2 & #3 & #4 \\}
\newcommandx*{\mc}[1]{\multicolumn{4}{c}{\emph{#1}} \\\\}

% \eqnarg is slightly more involved: output ( ... ) if not in mask,
% and { ... } if in mask
\newcommandx*{\eqnarg}[3]{\ifinmask[bonak]{#1}[#2]{\{#2:#3\}}{(#2:#3)}}

\title{WIP: Degeneracies and permuatations}
\author{Hugo Herbelin}{UniversitÃ© Paris CitÃ©, Inria, CNRS, IRIF, Paris}{Hugo.Herbelin@inria.fr}{}{}
\author{Ramkumar Ramachandra}{Unaffiliated}{r@artagnon.com}{}{}
\authorrunning{H. Herbelin and R. Ramachandra}
\keywords{Parametricity, Semi-simplicial sets, Semi-cubical sets, Formalization, Rocq, Indexed-fibred correspondence}
\ccsdesc{10003752.10003790.10011740}
\Copyright{Hugo Herbelin and Ramkumar Ramachandra}
%\nolinenumbers

\begin{document}
\maketitle
\begin{abstract}
  TODO
\end{abstract}

\section{Introduction}
\begin{equation*}
  \begin{array}{cllccllll}
    \multicolumn{3}{c}{\mbox{\emph{fibred form}}} & \quad\mathit{vs}\quad & \multicolumn{3}{l}{\mbox{\emph{indexed form}}}                                                                                                                                                                                                               \\
    \\
    Y_0                                           & :                     & \HSet[l]                                       &  & X_0                                                                                & :                & \HSet[l]                                                                     & \mbox{(points)}   \\
    \uparrow\uparrow\!\downarrow                                                                                                                                                                                                                                                                                                         \\
    Y_1                                           & :                     & \HSet[l]                                       &  & X_1                                                                                & :                & X_0 \times X_0 \rightarrow \HSet[l]                                          & \mbox{(segments)} \\
    \uparrow\uparrow\uparrow\uparrow\!\downarrow  &                       &                                                &  & r_0                                                                                & :                & \Pi x_0:X_0.\,X_1(x_0,x_0)                                                                       \\
    Y_2                                           & :                     & \HSet[l]                                       &  & X_2                                                                                & :                & \Pi (x^0_{LL},x^0_{LR}).\, \Pi x^1_{L*}:X_1 (x^0_{LL},x^0_{LR}).                                 \\
                                                  &                       &                                                &  &                                                                                    &                  & \Pi (x^0_{RL},x^0_{RR}).\, \Pi x^1_{R*}:X_1 (x^0_{RL},x^0_{RR}).\,                               \\
    \multicolumn{3}{c}{\mbox{~+ coherences}}      &                       &                                                &  & X_1 (x^0_{LL},x^0_{RL}) \times X_1 (x^0_{LR},x^0_{RR}) \rightarrow \HSet[l] \qquad & \mbox{(squares)}                                                                                                    \\
                                                  &                       &                                                &  & r_1                                                                                & :                & \Pi (x^0_{L},x^0_{R}):(X_0 \times X_0).\,\Pi x^1:X_1(x^0_L,x^0_R).\,                             \\
                                                  &                       &                                                &  &                                                                                    &                  & X_2((x^0_{L},x^0_{L}),r_0(x^0_{L}),(x^0_{R},x^0_{R}),r_0(x^0_{R}),(x^1,x^1))                     \\
    \vdots                                        &                       &                                                &  & \vdots                                                                                                                                                                                                   \\
  \end{array}
\end{equation*}

The added degeneracy is \emph{parametric}: in the binary case, it gives a standard cubical degeneracy; in the unary case, it gives a ParamTT-like degeneracy and \emph{not} a simplicial degeneracy.

First, our degeneracy implies a distinguished point $r_{-1}(a)$ for any $a:X_{-1}$. Then:

\begin{equation*}
  \begin{array}{lcccr}
    \begin{tabular}{l}source\\ (over some $a:X_{-1}$)\end{tabular}       & b~~                                                               & \begin{tikzcd}b \arrow[r, dash,"q"] & c\end{tikzcd} \\[1mm]
    \begin{tabular}{l}parametric\\ degeneracy\end{tabular}               & \begin{tikzcd}b \arrow[r, dash, "r_0(b)"] & r_{-1}(a)\end{tikzcd} &
    \begin{tikzcd}
      & |[alias=F]|r_{-1}(a) \arrow[ddr, dash, "r_0(c)"] & \\\\
      b \arrow[rr, dash, "q"{name=T, below}]\arrow[uur, dash, "r_0(b)"] && c \\
      \arrow[rightarrow, from=F, to=T, phantom, "r_1(q)" description]
    \end{tikzcd}                                                                                                                         \\[-8mm]
    \begin{tabular}{l}simplicial\\ degeneracy\end{tabular}               & \begin{tikzcd}b \arrow[r, dash, "s_0(b)"] & b\end{tikzcd}         &
    \begin{tikzcd}
      & |[alias=F]|c \arrow[ddr, dash, "s_0(c)"] & \\\\
      b \arrow[rr, dash, "q"{name=T, below}]\arrow[uur, dash, "q"] && c \\
      \arrow[rightarrow, from=F, to=T, phantom, "s_1(q)" description]
    \end{tikzcd} & \begin{tabular}{l}actually\\ a 1-connection!\end{tabular}
  \end{array}
\end{equation*}

\section*{Adding a degeneracy}

For any $(X_0,X_1,...): \X$, we define a stream of degeneracies:
\begin{equation*}
  \begin{array}{lll}
    \Xrefl(X_0,X_1,...) ~~ \defeq                                                                                                                                                                                                                            \\
    \quad \Sigma r_{0}:\Pi d:\mathsf{\color{indian-yellow}{fullframe}}^{0}.\,\Pi x:\textcolor{red}{X_0}(d).\,\textcolor{red}{X_1}(\mathsf{\color{russian-green}{refl}}_{\mathsf{\color{indian-yellow}{fullframe}}}^0(d),\lambda \epsilon.\,x).               \\
    \quad \Sigma r_1:\Pi d:\mathsf{\color{indian-yellow}{fullframe}}^1(X_0).\,\Pi x:\textcolor{red}{X_1}(d).\,\textcolor{red}{X_2}(\mathsf{\color{russian-green}{refl}}_{\mathsf{\color{indian-yellow}{fullframe}}}^1(r_{0})(d),\lambda \epsilon.\,x).       \\
    \quad \Sigma r_2:\Pi d:\mathsf{\color{indian-yellow}{fullframe}}^2(X_0,X_1).\,\Pi x:\textcolor{red}{X_2}(d).\,\textcolor{red}{X_3}(\mathsf{\color{russian-green}{refl}}_{\mathsf{\color{indian-yellow}{fullframe}}}^2(r_0,r_1)(d),\lambda \epsilon.\,x). \\
    \quad ...
  \end{array}
\end{equation*}
where
\begin{equation*}
  \mathsf{\color{russian-green}{refl}}_{\mathsf{\color{indian-yellow}{fullframe}}}^n(r_{-1},...,r_{n-1}):\mathsf{\color{indian-yellow}{fullframe}}^n(X_{-1},...,X_{n-1}) \rightarrow \mathsf{\color{indian-yellow}{frame}}^{n+1,n}(X_{-1},...,X_{n})
\end{equation*}
computes the $n$ first layers of the border of $r_{n}(d)(x)$, knowing that the last layer is made of $\nu$ times $x$ itself, so that

\begin{equation*}
  (\mathsf{\color{russian-green}{refl}}_{\mathsf{\color{indian-yellow}{fullframe}}}^n(r_{-1},...,r_{n-1})(d),\lambda \epsilon.\,x) : \mathsf{\color{indian-yellow}{frame}}^{n+1,n+1}(X_{-1},...,X_{n})
\end{equation*}
is a full frame.

On the way, we need two coherence conditions:
\begin{equation*}
  \begin{array}{l}
    \mathsf{\textcolor{chestnut}{idrestrrefl}}_{\textcolor{indian-yellow}{\mathsf{frame}},\epsilon}^n(r_{-1},...,r_{n-1})~(d:\mathsf{\color{indian-yellow}{fullframe}}^n(X_0,...,X_{n-1})):                          \\
    ~~ \mathsf{\color{russian-green}{restr}}_{\mathsf{\color{indian-yellow}{frame}},\epsilon,n}^{n,n}(\mathsf{\color{russian-green}{refl}}_{\mathsf{\color{indian-yellow}{fullframe}}}^n(r_{-1},...,r_{n-1})(d)) = d \\
    \\
    \mathsf{\textcolor{chestnut}{cohrestrrefl}}_{\textcolor{indian-yellow}{\mathsf{frame}},\epsilon,p<n}^n(r_{-1},...,r_{n-1})~(d:\mathsf{\color{indian-yellow}{frame}}^{n,p}(X_0,...,X_{n-1})):                     \\
    ~~\;\mathsf{\color{russian-green}{restr}}_{\mathsf{\color{indian-yellow}{frame}},\epsilon,p}^{n,p}(\mathsf{\color{russian-green}{refl}}^{n,p}_{\mathsf{\color{indian-yellow}{frame}}}(r_{-1},...,r_{n-1})(d)) = \mathsf{\color{russian-green}{refl}}^{n-1,p}_{\mathsf{\color{indian-yellow}{frame}}}(r_{-1},...,r_{n-2})(\mathsf{\color{russian-green}{restr}}_{\mathsf{\color{indian-yellow}{frame}},\epsilon,p}^{n-1,p}(d))
  \end{array}
\end{equation*}
where
$\mathsf{\color{russian-green}{refl}}^{n,p}_{\mathsf{\color{indian-yellow}{frame}}}$ generalises $\mathsf{\color{russian-green}{refl}}_{\mathsf{\color{indian-yellow}{fullframe}}}^{n}$
to prefixes of
$\mathsf{\color{indian-yellow}{fullframe}}^n$:

\begin{equation*}
  \mathsf{\color{russian-green}{refl}}^{n,p}_{\mathsf{\color{indian-yellow}{frame}}}(r_{-1},...,r_{n-1}):\mathsf{\color{indian-yellow}{frame}}^{n,p}(X_{-1},...,X_{n-1}) \rightarrow \mathsf{\color{indian-yellow}{frame}}^{n+1,p}(X_{-1},...,X_{n})
\end{equation*}

\section{Tables}
% Abbreviated tables in this section
%
% The rule for implicit arguments for each table:
% show 1 explicit in first two parts
% show E + 1 explicit in the third part
\appendmask[bonak]{layer}[D]
\appendmask[bonak]{painting}[D]
\appendmask[bonak]{restrframe}[D]
\appendmask[bonak]{restrlayer}[D, d]
\appendmask[bonak]{restrpainting}[D, d]
\appendmask[bonak]{reflframe}[D]
\appendmask[bonak]{refllayer}[D, d]
\appendmask[bonak]{reflpainting}[D, E, L, d]
\appendmask[bonak]{cohframe}[D]
\appendmask[bonak]{cohlayer}[D, d]
\appendmask[bonak]{cohpainting}[D, d]

% Truncated sets, otherwise referred to as X
% Keep all arguments
\newcommandx{\Xto}[2][2]{\X[<#1][#2]}
\newcommandx{\Xcomp}[2][2]{\X[=#1][#2]}
\newcommandx{\Xfrom}[2][2]{\X[\geq#1][#2]}


% Refl truncated sets.
\newcommandx{\Xreflto}[2][2]{\Xrefl[<#1][#2]}
\newcommandx{\Xreflcomp}[2][2]{\Xrefl[=#1][#2]}
\newcommandx{\Xreflfrom}[2][2]{\Xrefl[\geq#1][#2]}

\def\lab{tab:coind}
\input{tab-coind.tex}

\def\lab{tab:core}
\input{tab-core.tex}

\def\lab{tab:reflext}
\input{tab-reflext.tex}

\def\lab{tab:refl}
\input{tab-refl.tex}

\def\lab{tab:cohid}
\input{tab-cohid.tex}

\def\lab{tab:cohext}
\input{tab-cohext.tex}

\def\lab{tab:coh}
\input{tab-coh.tex}

\renewcommandx{\cohf}{\coh{frame}[][][][][][][][]}
\renewcommandx{\cohl}{\coh{layer}[][][][][][][][]}
\renewcommandx{\cohp}{\coh{painting}[][][][][][][][]}


\bibliographystyle{plainurl}
\bibliography{paper}

\end{document}
